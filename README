This is an ugly hack based on the camera capture example code
in the Qt SDK.